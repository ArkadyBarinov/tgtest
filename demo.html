<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>


import express, { query } from 'express'
import Telegraf from 'telegraf'
import Calendar from 'telegraf-calendar-telegram'
const app = express()
const bot = new Telegraf(TOKEN)
// instantiate the calendar
const date = new Date()
date.setDate(date.getDate() + 14);
var onlidate=[]
const calendar = new Calendar(bot,{
    minDate: date,
    startWeekDay: 1,
    weekDayNames: ["–ü", "–í", "–°", "–ß", "–ü", "–°", "–í"],
    monthNames: [
        "–Ø–Ω–≤–∞—Ä—å", "–§–µ–≤—Ä–∞–ª—å", "–ú–∞—Ä—Ç", "–ê–ø—Ä–µ–ª—å", "–ú–∞–π", "–ò—é–Ω—å",
        "–ò—é–ª—å", "–ê–≤–≥—É—Å—Ç", "–°–µ–Ω—Ç—è–±—Ä—å", "–û–∫—Ç—è–±—Ä—å", "–ù–æ—è–±—Ä—å", "–î–µ–∫–∞–±—Ä—å"
    ],
})

bot.use(session())


bot.start(ctx => {
    ctx.replyWithHTML(
        `–ü—Ä–∏–≤–µ—Ç—Å–≤—É–µ–º –≤–∞—Å <b>${ctx.message.from.first_name}</b> –≤ –ª—É—á—à–µ–π –∫–æ–º–∞–Ω–¥–µ. –î–∞–Ω–Ω—ã–π –±–æ—Ç –ø–æ–º–æ–∂–µ—Ç –≤–∞–º <b>—Å–º–µ–Ω–∏—Ç—å –¥–∞—Ç—É –æ—Ç–ø—É—Å–∫–∞</b>\n\n`+
        `–ß—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –ª–µ–≥–∫–æ –≤–∞—Å –Ω–∞–π—Ç–∏ –≤ –Ω–∞—à–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –ø–æ–¥–µ–ª–∏—Å—å –≤–∞—à–∏–º —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º`,
        NumberMenu())
})
// bot.delete_message(message.chat.id, message.message_id)
// bot.deleteMessage(msg.chat.id, messageId)

// bot.on('message', function (msg) {//–ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
//     var text=msg.text;//–ø–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
//     if( text.indexOf('–°–õ–û–í–û') >= 0){//–ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–ª–æ–≤–∞
//         var chatId = msg.chat.id;//–ø–æ–ª—É—á–∞–µ–º ChatId –≥—Ä—É–ø–ø—ã
//         var msgId = msg.message_id;//–ø–æ–ª—É—á–∞–µ–º Id —Å–æ–æ–±—â–µ–Ω–∏—è
//         bot.deleteMessage(chatId,msgId);//—É–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
//     }
// });


//   bot.hears("–ú–Ω–µ –ø–æ–≤–µ–∑–µ—Ç", (ctx) => {
//      kolvod = getRandomIntInclusive()
//   })


bot.hears('–û—Ç–º–µ–Ω–∞', async ctx => {
    ctx.replyWithHTML(
        `<b>–≠—Ç–æ—Ç –±–æ—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∫–∞–º–ø–∞–Ω–∏–∏ Sokolov:</b>\n–ß—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω—ã —á—Ç–æ –≤—ã <b>${ctx.message.from.first_name} ${ctx.message.from.last_name}</b> —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ —ç—Ç–æ–π –∫–∞–º–ø–∞–Ω–∏–∏ , –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞\n`
    )
})
bot.hears('–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞', async ctx => {
    ctx.reply('–í—ã —Ç–æ—á–Ω–æ —Ö–æ—Ç–∏—Ç–µ —Å–ª–∏—Ç—å –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –≤ —Å–µ—Ç—å?', { reply_markup: { keyboard: [[{text: 'üì≤ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä–æ–º', request_contact: true}]], force_reply: true } })

    bot.on("contact", (data) => {
        console.log(data.message.chat.id);
        ctx.replyWithHTML(
            '<b>–°–ø–∞—Å–∏–±–æ –∑–∞ –¥–æ–≤–µ—Ä–∏–µ:</b>\n–û–∂–∏–¥–∞–π—Ç–µ –ø–æ–∫–∞ –º—ã –ø—Ä–æ–≤–µ—Ä–∏–º –≤–∞—Å –ø–æ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö\n',
            getMainMenu()
        )
    })
})


bot.hears('–£–∑–Ω–∞—Ç—å –¥–∞—Ç—É –æ—Ç–ø—É—Å–∫–∞', async ctx => {
    ctx.replyWithHTML(
        '<b>–í–∞—à –æ—Ç–ø—É—Å–∫ —Å–æ—Å—Ç–æ–∏—Ç—Å—è:</b>\n–í –±–∞–∑–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –¥–∞–Ω–Ω—ã–µ –æ –≤–∞—à–µ–º –æ—Ç–ø—É—Å–∫–µ,–Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥–æ–∂–¥–∏—Ç–µ, –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å, —Ç–æ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤–∞—à–µ–º—É —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É\n'
    )
})
/////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////


bot.hears('–°–º–µ–Ω–∏—Ç—å –¥–∞—Ç—É –æ—Ç–ø—É—Å–∫–∞', async ctx => {
    try {
        ctx.replyWithHTML(
        '–í–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –¥–∞–Ω–Ω—ã–º –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å <b>–¥–µ–Ω—å –Ω–∞—á–∞–ª–∞</b> –≤–∞—à–µ–≥–æ –æ—Ç–ø—É—Å–∫–∞',
    )
    await ctx.reply("–ü—Ä–æ—Å—Ç–æ –≤—ã–±–µ—Ä–∏—Ç–µ –¥–µ–Ω—å –Ω–∞—á–∞–ª–∞ –≤–∞—à–µ–≥–æ –æ—Ç–ø—É—Å–∫–∞", calendar.getCalendar());

    calendar.setDateListener((context, date) => {
        // context.reply(date)
        onlidate=date.split('T')
        console.log(date.split(','));
        ctx.replyWithHTML('<b>–ê —Ç–µ–ø–µ—Ä—å:</b>\n –£–∫–∞–∂–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç–ø—É—Å–∫–∞ –≤ –¥–Ω—è—Ö:\n', NumberCall())
    })
    await bot.on('text', ctx => {

    console.log(date),
    console.log(ctx),
    ctx.replyWithHTML(
        `–Ø, <b>${ctx.message.from.first_name} ${ctx.message.from.last_name}</b>, –ø–æ–¥—Ç–≤–µ–∂–¥–∞—é —Å–º–µ–Ω—É –¥–∞—Ç—ã –æ—Ç–ø—É—Å–∫–∞ –Ω–∞ –Ω–∞—á–∞–ª–æ ${onlidate} –∏ —Å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é ${ctx.message.text} –¥–µ–Ω—å(–¥–Ω—è((–¥–Ω–µ–π)):\n\n`+
        `<b>(–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ)</b>`,yesNoKeyboard())
})

    } catch (error) {
        console.error(error)
        
    }
})

bot.action("yes", (ctx) => {
    ctx.reply('–í–∞—à–µ –∑–∞—è–≤–ª–µ–Ω–∏–µ –ø–æ —Å–º–µ–Ω–µ –¥–∞—Ç –æ—Ç–ø—É—Å–∫–∞ —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω–æ –∏ –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏',getMainMenu(),ctx.deleteMessage())
})

bot.action("no", (ctx) => {
    ctx.reply('–í—Å–µ –æ—Å—Ç–∞–ª–æ—Å—å –∫–∞–∫ –ø—Ä–µ–∂–¥–µ',getMainMenu(),ctx.deleteMessage())
    
})

/////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////


bot.hears('–°–º–æ—Ç–∏–≤–∏—Ä—É–π –º–µ–Ω—è –Ω–∞ —Ä–∞–±–æ—Ç—É –±–µ–∑ –æ—Ç–ø—É—Å–∫–∞', ctx => {
    ctx.replyWithPhoto(
        'https://img2.goodfon.ru/wallpaper/nbig/7/ec/justdoit-dzhastduit-motivaciya.jpg',
        {
            caption: '–ù–µ –≤–∑–¥—É–º–∞–π —Å–¥–∞–≤–∞—Ç—å—Å—è!'
        }
    )
})


//  bot.action("–ú–Ω–µ –ø–æ–≤–µ–∑–µ—Ç", (ctx) => {
//     kolvod = getRandomIntInclusive()
//  })



// bot.hears("–ú–Ω–µ –ø–æ–≤–µ–∑–µ—Ç", (ctx) => {
//     return ctx.getRandomIntInclusive
//  } );
// ;


bot.hears("–•–æ—á—É —É–º–µ–Ω—å—à–∏—Ç—å —Å–≤–æ–π —É—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—Å–∞", (ctx) => {
    return ctx.replyWithAudio({ source: "./song.mp3" },
    {
        caption:'–£—Å–ø–æ–∫–æ–π—Ç–µ—Å—å –∏ —Å–Ω–æ–≤–∞ –∑–∞ —Ä–∞–±–æ—Ç—É'
    }
    );
  });
  bot.hears("–ó–∞—á–µ–º", (ctx) => {
    return ctx.replyWithVideo({ source: "./s1.gif" },
    {
        caption:' '
    }
    );
  });

// bot.action(['yes', 'no', 'change your choice'], ctx => {
//     if (ctx.callbackQuery.data === 'yes') {
//         addTask(ctx.session.taskText)
//         ctx.editMessageText('–í–∞—à–∞ –∑–∞—è–≤–∫–∞ –Ω–∞ —Å–º–µ–Ω—É –æ—Ç–ø—É—Å–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞, –æ–∂–∏–¥–∞–π—Ç–µ')
//     } else {
//         ctx.deleteMessage()
//     }
// })





// bot.help((ctx) => ctx.reply('Send me a sticker'));
bot.help(ctx => {ctx.reply("–î–∞, —á–µ–º —è –º–æ–≥—É –ø–æ–º–æ—á—å");})
bot.on('sticker', (ctx) => ctx.reply('üëç'));
bot.hears('–ø—Ä–∏–≤–µ—Ç', (ctx) => ctx.reply(`–ø—Ä–∏–≤–µ—Ç ${ctx.message.from.first_name} ${ctx.message.from.last_name}`));
bot.hears('—á—Ç–æ —Ç—ã –º–æ–∂–µ—à—å?', (ctx) => ctx.reply('—è –º–æ–≥—É –≤—Å–µ'));
bot.on('photo', (ctx) => ctx.reply('–í—ã –∑–∞—á–µ–º —Ç–æ –ø—Ä–∏—Å–ª–∞–ª–∏ —ç—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —Ö–æ—Ç—è —è –Ω–µ –ø—Ä–æ—Å–∏–ª —ç—Ç–æ–≥–æ'));
bot.hears('—É–∑–Ω–∞—Ç—å –æ—Ç–ø—É—Å–∫', (ctx) => ctx.reply('–±–µ–∑ –ø—Ä–æ–±–ª–µ–º'));
bot.on('edited_message', ctx => {
    ctx.reply('–í—ã —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ')
})
bot.on('voice', ctx => {
    ctx.reply('–ö–∞–∫–æ–π —á—É–¥–Ω—ã–π –≥–æ–ª–æ—Å')
})
bot.command('time', ctx => {
    ctx.reply(String(new Date()))
})
bot.command("whoami", (ctx) => {
    const { id, username, first_name, last_name } = ctx.from;
    return ctx.replyWithMarkdown(`–ö—Ç–æ —Ç—ã –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–º–µ:
  *id* : ${id}
  *username* : ${username}
  *–ò–º—è* : ${first_name}
  *–§–∞–º–∏–ª–∏—è* : ${last_name}
  *chatId* : ${ctx.chat.id}`);
  });
bot.launch()
app.listen(PORT, () => console.log(`My server is running on port ${PORT}`))

</script>
</body>
</html>